- alias: Accendi Luci Esterne al tramonto
  trigger:
    platform: sun
    event: sunset
  condition:
  action:
    service: homeassistant.turn_on
    entity_id: group.LuciEsterno
  id: 8676479df9d247669ef12e673133c8a8
- alias: Spegni Luci Esterne all'alba
  trigger:
    platform: sun
    event: sunrise
  condition:
  action:
    service: homeassistant.turn_off
    entity_id: group.LuciEsterno
  id: 8676479ef9d247669ef12e673133c8a8
- alias: WakeUp Light Bedroom
  trigger:
    platform: template
    value_template: '{{ states.sensor.time.state == states.sensor.wakeup_start_time_lights.state
      }}'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.wakeup
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: input_boolean.wakeup_weekends
        state: 'on'
      - condition: time
        weekday:
        - mon
        - tue
        - wed
        - thu
        - fri
  action:
    service: script.wakeup_bedroom
  id: 22a2b5b47dda48a48bf111d0456675bd
- id: '1541267648714'
  alias: AccendiLuceAleSePresenzaeBuio
  trigger:
  - entity_id: binary_sensor.motion_sensor_158d00024e7487
    from: 'OFF'
    platform: state
    to: 'ON'
  condition:
  - below: '1000'
    condition: numeric_state
    entity_id: sensor.illumination_158d00024e7487
  action:
  - data:
      light.FarettoAlessandroTV:
    service: light.turn_on
  - data:
      light.FarettoAlessandroLetto:
    service: light.turn_on
- id: '1541894435257'
  alias: Cucina ON
  trigger:
  - entity_id: binary_sensor.motion_sensor_cucina
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - below: '40'
    condition: numeric_state
    entity_id: sensor.illumination_lxcucina
  action:
  - data:
      entity_id: switch.lucecucina
    service: switch.turn_on
  - data:
      entity_id: light.cucina
    service: light.turn_on
- id: '1541971315219'
  alias: Cabina ON
  trigger:
  - entity_id: binary_sensor.motion_sensor_cabinaarmadio
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: switch.internocabina
    service: switch.turn_on
- id: '1541971507989'
  alias: Cabina OFF
  trigger:
  - entity_id: binary_sensor.motion_sensor_cabinaarmadio
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.internocabina
    service: switch.turn_off
- id: '1541972064766'
  alias: Salone On
  trigger:
  - entity_id: binary_sensor.motion_sensor_tavolosalone
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - below: '500'
    condition: numeric_state
    entity_id: sensor.illumination_tavolosalone
  action:
  - data:
      entity_id: switch.tavolosalone
    service: switch.turn_on
- id: '1542046339391'
  alias: Ingresso ON
  trigger:
  - entity_id: binary_sensor.door_window_sensor_portacasa
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: switch.cespuglioingressosalone
    service: switch.turn_on
- id: '1542046455143'
  alias: Salone Blu
  trigger:
  - entity_id: binary_sensor.motion_sensor_tavolosalone
    for: '2'
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: binary_sensor.motion_sensor_cucina
    for: '1'
    from: 'on'
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: sensor.media
    state: SKY
  action:
  - data: {}
    service: script.blu_gradualmente_salone
- id: '1542222080214'
  alias: Accendi Led Letto Alessandro
  trigger:
  - entity_id: binary_sensor.motion_sensor_sottolettto
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: light.sotto_letto_ale
    service: light.turn_on
- id: '1542222429134'
  alias: Spegni Led Letto Alessandro
  trigger:
  - entity_id: binary_sensor.motion_sensor_sottolettto
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: light.sotto_letto_ale
    service: light.turn_off
- id: '1542231785381'
  alias: Cucina OFF
  trigger:
  - entity_id: binary_sensor.motion_sensor_cucina
    for: '5'
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.lucecucina
    service: switch.turn_off
- id: '1542310620823'
  alias: Ingresso off
  trigger:
  - entity_id: binary_sensor.sensor_ingresso
    from: 'ON'
    platform: state
    to: 'OFF'
  condition: []
  action:
  - data:
      entity_id: switch.cespuglioingressosalone
    service: switch.turn_off
- id: '1542375912752'
  alias: Ale on
  trigger:
  - entity_id: binary_sensor.motion_sensor_alessandro
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - below: '50'
    condition: numeric_state
    entity_id: sensor.illumination_ale
  action:
  - data:
      entity_id: light.armadiale
    service: light.turn_on
  - data:
      entity_id: light.lettoale
    service: light.turn_on
- id: '1542387063132'
  alias: Ale Off
  trigger:
  - entity_id: binary_sensor.motion_sensor_alessandro
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: light.armadiale
    service: light.turn_off
  - data:
      entity_id: light.lettoale
    service: light.turn_off
- id: '1542395170608'
  alias: GioNic 1 ON
  trigger:
  - entity_id: binary_sensor.motion_sensor_158d00015d4d01
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: switch.lettogionic
    service: switch.turn_on
- id: '1542395285346'
  alias: GioNic 1 Off
  trigger:
  - entity_id: binary_sensor.motion_sensor_gionic1
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.lettogionic
    service: switch.turn_off
- id: '1542648848919'
  alias: Scale Taverna ON
  trigger:
  - entity_id: binary_sensor.motion_sensor_scaletaverna
    from: 'off'
    platform: state
    to: 'on'
  - entity_id: binary_sensor.door_window_sensor_portataverna
    from: 'off'
    platform: state
    to: 'on'
  - entity_id: binary_sensor.door_window_sensor_portagarage
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: light.scaletaverna
    service: light.turn_on
- id: '1543177385955'
  alias: Doccia ON
  trigger:
  - entity_id: binary_sensor.motion_sensor_doccia
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: light.doccia
    service: light.turn_on
  - data:
      entity_id: light.lavabo
    service: light.turn_on
- id: '1543769237079'
  alias: Spegni Albero e decorazioni con allarme
  trigger:
  - entity_id: binary_sensor.allarmeinseritocasa
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      entity_id: switch.alberodinatale
    service: switch.turn_off
  - data:
      entity_id: switch.decorazioninatale
    service: switch.turn_off
- id: '1543769403642'
  alias: Accendi Decorazioni Natale al Tramonto
  trigger:
  - event: sunset
    offset: '30'
    platform: sun
  condition: []
  action:
  - data:
      entity_id: switch.decorazioninatale
    service: switch.turn_on
- id: '1543773994051'
  alias: Ricorda Inserimento Allarme
  trigger:
  - entity_id: binary_sensor.door_window_sensor_portafinestratavologiardino
    for: '5'
    from: 'on'
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: binary_sensor.door_window_sensor_portacasa
    state: 'OFF'
  - condition: state
    entity_id: binary_sensor.door_window_sensor_portafinestracucina
    state: 'OFF'
  - condition: state
    entity_id: binary_sensor.door_window_sensor_portafinestrasalone
    state: 'OFF'
  - condition: state
    entity_id: binary_sensor.door_window_sensor_portafinestratavologiardino
    state: 'OFF'
  - condition: state
    entity_id: binary_sensor.allarmeinseritocasa
    state: 'off'
  action:
  - data:
      entity_id: media_player.echo_plus__reinas
      message: Ricordati di aver inserire l'allarme. Dopo controlla se Giovanna sta
        bene
    service: media_player.alexa_tts
- id: '1543844777759'
  alias: Salone OFF
  trigger:
  - entity_id: binary_sensor.motion_sensor_tavolosalone
    for: '2'
    from: 'on'
    platform: state
    to: 'off'
  condition:
  - after: 00:00
    before: '19:30'
    condition: time
  - after: '22:00'
    before: 00:00
    condition: time
  action:
  - data:
      entity_id: switch.tavolosalone
    service: light.turn_off
- id: '1543868730181'
  alias: Cale
  trigger:
  - entity_id: calendar.test_everything
    from: 'OFF'
    platform: state
    to: 'ON'
  condition: []
  action:
  - data:
      entity_id: media_player.echo_plus__reinas
      message: Test message
    service: media_player.alexa_tts
- id: '1544208501954'
  alias: Scale Taverna OFF
  trigger:
  - entity_id: binary_sensor.motion_sensor_scaletaverna
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: light.scaletaverna
    service: light.turn_off
- id: '1544356757528'
  alias: Start Daily Vacuum
  trigger:
  - platform: time
    minutes: /45
    seconds: 0
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: device_tracker.galaxy_note_fan_edition
      state: not_home
    - condition: state
      entity_id: input_boolean.daily_vacuum_first_run
      state: 'off'
    - condition: time
      after: '11:00:00'
      before: '21:00:00'
    - condition: state
      entity_id: input_boolean.disable_daily_vacuum
      state: 'off'
  action:
  - delay: 00:00:15
  - service: vacuum.turn_on
    entity_id: vacuum.xiaomi_vacuum_cleaner
  - service: homeassistant.turn_on
    entity_id: input_boolean.daily_vacuum_first_run
  hide_entity: true
- id: '1554356757528'
  alias: Allarme in assenza
  trigger:
  - platform: state
    entity_id: binary_sensor.motion_sensor_divano
    to: on
  - platform: state
    entity_id: binary_sensor.motion_sensor_cabinaarmadio
    to: on
  - platform: state
    entity_id: binary_sensor.door_window_sensor_portacasa
    to: open
  - platform: state
    entity_id: binary_sensor.door_window_sensor_portafinestracucina
    to: open
  condition:
  - condition: state
    entity_id: alarm_control_panel.AllarmeDomotica
    state: armed_away
  action:
    service: alarm_control_panel.alarm_trigger
    entity_id: alarm_control_panel.AllarmeDomotica
- id: 'Allarme Domotica'
  alias: Send notification when alarm triggered
  trigger:
  - platform: state
    entity_id: alarm_control_panel.AllarmeDomotica
    to: triggered
  action:
  - service: notify.notify
    data:
      message: Allarme
      title: Movimento
